{
  "id": "dutyroster",
  "title": "Duty Roster",
  "description": "Manages staff duty scheduling, including shifts, assigned roles, and weekly rotation plans for hospital departments.",
  "route": "/duty-roster",
  "icon": "CalendarClock",
  "entity": "DutyRoster",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "HR", "DepartmentHead"],
    "create": ["Admin", "HR"],
    "edit": ["Admin", "HR"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/dutyroster",
    "get": "/api/dutyroster/:id",
    "create": "/api/dutyroster",
    "update": "/api/dutyroster/:id",
    "delete": "/api/dutyroster/:id",
    "publish": "/api/dutyroster/:id/publish"
  },

  "fields": [
    {
      "name": "id",
      "label": "Roster ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "rosterName",
      "label": "Roster Name / Week Label",
      "type": "string",
      "placeholder": "e.g. Week 1 - October 2025",
      "required": true,
      "showInList": true
    },
    {
      "name": "departmentId",
      "label": "Department",
      "type": "relation",
      "relationEntity": "departments",
      "relationField": "name",
      "required": true,
      "showInList": true,
      "filterable": true
    },
    {
      "name": "startDate",
      "label": "Start Date",
      "type": "date",
      "required": true,
      "showInList": true
    },
    {
      "name": "endDate",
      "label": "End Date",
      "type": "date",
      "required": true,
      "showInList": true
    },
    {
      "name": "shiftType",
      "label": "Shift Type",
      "type": "enum",
      "options": ["STRAIGHT", "BREAK_SHIFT", "ROTATIONAL"],
      "default": "STRAIGHT",
      "widget": "select",
      "showInList": true
    },
    {
      "name": "assignments",
      "label": "Staff Assignments",
      "type": "array",
      "itemFields": [
        {
          "name": "staffId",
          "label": "Staff Member",
          "type": "relation",
          "relationEntity": "staff",
          "relationField": "fullName",
          "required": true
        },
        {
          "name": "role",
          "label": "Role / Designation",
          "type": "relation",
          "relationEntity": "roles",
          "relationField": "roleName",
          "required": true
        },
        {
          "name": "shiftStart",
          "label": "Shift Start",
          "type": "time",
          "required": true
        },
        {
          "name": "shiftEnd",
          "label": "Shift End",
          "type": "time",
          "required": true
        },
        {
          "name": "dayOfWeek",
          "label": "Day of Week",
          "type": "enum",
          "options": ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
          "required": true
        },
        {
          "name": "status",
          "label": "Duty Status",
          "type": "enum",
          "options": ["SCHEDULED", "ON_LEAVE", "OFF_DUTY"],
          "default": "SCHEDULED"
        }
      ],
      "showInList": false
    },
    {
      "name": "isPublished",
      "label": "Published",
      "type": "boolean",
      "default": false,
      "widget": "toggle",
      "showInList": true
    },
    {
      "name": "createdBy",
      "label": "Created By",
      "type": "relation",
      "relationEntity": "users",
      "relationField": "fullName",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    { "entity": "departments", "type": "ManyToOne", "foreignKey": "departmentId" },
    { "entity": "staff", "type": "OneToMany", "foreignKey": "staffId" },
    { "entity": "users", "type": "ManyToOne", "foreignKey": "createdBy" }
  ],

  "ui": {
    "listView": {
      "title": "Duty Rosters",
      "columns": [
        "rosterName",
        "departmentId",
        "startDate",
        "endDate",
        "shiftType",
        "isPublished"
      ],
      "filters": ["departmentId", "shiftType", "isPublished"],
      "searchFields": ["rosterName"],
      "actions": ["view", "edit", "publish", "delete"]
    },
    "formView": {
      "title": "Create Duty Roster",
      "layout": [
        ["rosterName", "departmentId"],
        ["startDate", "endDate"],
        ["shiftType"],
        ["assignments"]
      ],
      "actions": [
        {
          "id": "saveRoster",
          "label": "Save Roster",
          "type": "submit",
          "endpoint": "/api/dutyroster",
          "method": "POST",
          "successMessage": "Duty roster created successfully!"
        },
        { "id": "cancel", "label": "Cancel", "type": "cancel" }
      ]
    },
    "detailView": {
      "title": "Duty Roster Details",
      "sections": [
        {
          "title": "Roster Info",
          "fields": ["rosterName", "departmentId", "startDate", "endDate", "shiftType"]
        },
        {
          "title": "Assignments",
          "fields": ["assignments"]
        },
        {
          "title": "Publication Info",
          "fields": ["isPublished", "createdBy", "createdAt"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "publishRoster",
      "label": "Publish Roster",
      "type": "action",
      "endpoint": "/api/dutyroster/:id/publish",
      "method": "PATCH",
      "confirmation": "Are you sure you want to publish this roster?",
      "successMessage": "Duty roster published successfully!"
    },
    {
      "id": "notifyStaff",
      "label": "Notify Staff",
      "type": "action",
      "endpoint": "/api/dutyroster/:id/notify",
      "method": "POST",
      "confirmation": "Send notifications to assigned staff?",
      "successMessage": "Staff notified successfully!"
    }
  ],

  "reasoning": {
    "businessLogic": "Duty rosters ensure operational efficiency by scheduling staff shifts, managing overlapping duties, and preventing conflicts. Published rosters notify staff and update attendance tracking automatically.",
    "uiLogic": "HR or Admin users can create rosters per department, define daily shift timings, and assign staff. The array-based structure supports both weekly and monthly scheduling patterns."
  }
}
