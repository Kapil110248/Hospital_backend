{
  "id": "auditlogs",
  "title": "Audit Logs",
  "description": "Tracks every important system event and user action for accountability and compliance.",
  "route": "/audit-logs",
  "icon": "History",
  "entity": "AuditLog",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin"],
    "export": ["Admin", "Accountant"]
  },

  "api": {
    "list": "/api/audit-logs",
    "get": "/api/audit-logs/:id",
    "create": "/api/audit-logs",
    "delete": "/api/audit-logs/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Log ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "userId",
      "label": "User",
      "type": "relation",
      "relationEntity": "users",
      "relationField": "fullName",
      "showInList": true,
      "required": true
    },
    {
      "name": "role",
      "label": "Role",
      "type": "string",
      "showInList": true,
      "readOnly": true
    },
    {
      "name": "action",
      "label": "Action Type",
      "type": "enum",
      "options": [
        "LOGIN",
        "LOGOUT",
        "CREATE",
        "UPDATE",
        "DELETE",
        "VIEW",
        "APPROVE",
        "EXPORT",
        "SYSTEM"
      ],
      "widget": "badge",
      "colorMap": {
        "LOGIN": "green",
        "LOGOUT": "gray",
        "CREATE": "blue",
        "UPDATE": "orange",
        "DELETE": "red",
        "VIEW": "indigo",
        "APPROVE": "teal",
        "EXPORT": "purple",
        "SYSTEM": "yellow"
      },
      "showInList": true
    },
    {
      "name": "module",
      "label": "Module",
      "type": "string",
      "placeholder": "Module or feature name",
      "showInList": true
    },
    {
      "name": "recordId",
      "label": "Affected Record ID",
      "type": "string",
      "nullable": true,
      "showInList": false
    },
    {
      "name": "description",
      "label": "Description",
      "type": "text",
      "placeholder": "Brief summary of the action performed",
      "showInList": false
    },
    {
      "name": "ipAddress",
      "label": "IP Address",
      "type": "string",
      "placeholder": "192.168.0.1",
      "showInList": false
    },
    {
      "name": "deviceInfo",
      "label": "Device / Browser",
      "type": "string",
      "placeholder": "Chrome on Windows 11",
      "showInList": false
    },
    {
      "name": "timestamp",
      "label": "Timestamp",
      "type": "datetime",
      "readOnly": true,
      "showInList": true,
      "sortable": true
    }
  ],

  "relations": [
    { "entity": "users", "type": "ManyToOne", "foreignKey": "userId" }
  ],

  "ui": {
    "listView": {
      "title": "Audit Trail",
      "columns": ["timestamp", "userId", "role", "action", "module"],
      "filters": ["action", "module", "role"],
      "searchFields": ["userId", "module", "action"],
      "actions": ["view", "export"],
      "exportOptions": ["CSV", "XLSX"]
    },
    "detailView": {
      "title": "Log Details",
      "sections": [
        {
          "title": "Action Summary",
          "fields": ["timestamp", "action", "module", "recordId"]
        },
        {
          "title": "User Information",
          "fields": ["userId", "role", "ipAddress", "deviceInfo"]
        },
        {
          "title": "Description",
          "fields": ["description"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "exportLogs",
      "label": "Export Logs",
      "type": "export",
      "endpoint": "/api/audit-logs/export",
      "method": "GET",
      "formatOptions": ["CSV", "XLSX"],
      "successMessage": "Audit logs exported successfully!"
    },
    {
      "id": "clearLogs",
      "label": "Clear Logs",
      "type": "delete",
      "endpoint": "/api/audit-logs/clear",
      "method": "DELETE",
      "confirmation": "Are you sure you want to clear all audit logs?",
      "successMessage": "All audit logs cleared successfully."
    }
  ],

  "reasoning": {
    "businessLogic": "Audit logs provide a detailed record of all critical actions within the system â€” ensuring transparency, compliance, and accountability. Every user operation (like patient updates or billing approvals) is logged for traceability.",
    "uiLogic": "Admins can filter logs by module, user, or action. Data exports support compliance reporting (e.g., hospital audits). The system automatically captures contextual info like IP, device, and timestamps."
  }
}
