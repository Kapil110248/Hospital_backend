{
  "id": "permissions",
  "title": "Module Permissions",
  "description": "Defines all available system permissions for each module. Each permission can be assigned to one or more roles.",
  "route": "/permissions",
  "icon": "KeyRound",
  "entity": "Permission",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin"],
    "create": ["Admin"],
    "edit": ["Admin"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/permissions",
    "get": "/api/permissions/:id",
    "create": "/api/permissions",
    "update": "/api/permissions/:id",
    "delete": "/api/permissions/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Permission ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "module",
      "label": "Module Name",
      "type": "enum",
      "options": [
        "AUTH",
        "USERS",
        "ROLES",
        "DEPARTMENTS",
        "PATIENTS",
        "DOCTORS",
        "APPOINTMENTS",
        "LAB",
        "PHARMACY",
        "BILLING",
        "INVENTORY",
        "REPORTS",
        "SETTINGS"
      ],
      "required": true,
      "widget": "select",
      "showInList": true,
      "filterable": true
    },
    {
      "name": "actionName",
      "label": "Action Name",
      "type": "enum",
      "options": ["VIEW", "CREATE", "EDIT", "DELETE", "APPROVE", "ASSIGN", "EXPORT"],
      "required": true,
      "widget": "select",
      "showInList": true,
      "filterable": true
    },
    {
      "name": "description",
      "label": "Description",
      "type": "text",
      "placeholder": "What does this permission allow?",
      "showInList": false
    },
    {
      "name": "roles",
      "label": "Assigned Roles",
      "type": "relation-multi",
      "relationEntity": "roles",
      "relationField": "displayName",
      "widget": "checkbox-list",
      "showInList": false
    },
    {
      "name": "isCritical",
      "label": "Critical Permission",
      "type": "boolean",
      "default": false,
      "widget": "toggle",
      "showInList": true
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    {
      "entity": "roles",
      "type": "ManyToMany",
      "foreignKey": "permissionId"
    }
  ],

  "ui": {
    "listView": {
      "title": "Permissions Directory",
      "columns": ["module", "actionName", "isCritical", "createdAt"],
      "actions": ["view", "edit", "delete"],
      "filters": ["module", "isCritical"],
      "searchFields": ["module", "actionName"]
    },

    "formView": {
      "title": "Add / Edit Permission",
      "layout": [
        ["module", "actionName"],
        ["description"],
        ["roles"],
        ["isCritical"]
      ],
      "actions": ["save", "cancel"]
    },

    "detailView": {
      "title": "Permission Details",
      "sections": [
        {
          "title": "Information",
          "fields": ["module", "actionName", "description", "isCritical"]
        },
        {
          "title": "Linked Roles",
          "fields": ["roles"]
        },
        {
          "title": "Timestamps",
          "fields": ["createdAt", "updatedAt"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "createPermission",
      "label": "Create Permission",
      "type": "create",
      "endpoint": "/api/permissions",
      "method": "POST",
      "successMessage": "Permission created successfully!"
    },
    {
      "id": "updatePermission",
      "label": "Update Permission",
      "type": "edit",
      "endpoint": "/api/permissions/:id",
      "method": "PUT",
      "successMessage": "Permission updated successfully!"
    },
    {
      "id": "deletePermission",
      "label": "Delete Permission",
      "type": "delete",
      "endpoint": "/api/permissions/:id",
      "method": "DELETE",
      "confirmation": "Are you sure you want to delete this permission?",
      "successMessage": "Permission deleted successfully."
    }
  ],

  "reasoning": {
    "businessLogic": "Permissions define specific actions that roles can perform. Admin can configure what each role can view, create, edit, or delete in each module. This enables fine-grained access control across the system.",
    "uiLogic": "The Permission management UI provides an easy checkbox-based linking between roles and modules. Each permission can be reused by multiple roles, allowing scalable RBAC management."
  }
}
