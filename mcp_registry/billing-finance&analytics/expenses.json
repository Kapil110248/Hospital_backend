{
  "id": "expenses",
  "title": "Expense Management",
  "description": "Tracks and manages all operational and financial expenses across departments â€” including utilities, purchases, maintenance, and reimbursements.",
  "route": "/billing/expenses",
  "icon": "ReceiptText",
  "entity": "Expense",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Accountant"],
    "create": ["Admin", "Accountant"],
    "edit": ["Admin", "Accountant"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/expenses",
    "get": "/api/expenses/:id",
    "create": "/api/expenses",
    "update": "/api/expenses/:id",
    "delete": "/api/expenses/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Expense ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "expenseDate",
      "label": "Expense Date",
      "type": "date",
      "required": true,
      "showInList": true
    },
    {
      "name": "category",
      "label": "Expense Category",
      "type": "enum",
      "options": ["SUPPLIES", "MAINTENANCE", "UTILITY", "SALARY", "REIMBURSEMENT", "OTHER"],
      "widget": "select",
      "required": true,
      "showInList": true
    },
    {
      "name": "amount",
      "label": "Amount",
      "type": "currency",
      "required": true,
      "showInList": true
    },
    {
      "name": "paymentMethod",
      "label": "Payment Method",
      "type": "enum",
      "options": ["CASH", "BANK_TRANSFER", "CHEQUE", "CARD"],
      "widget": "select",
      "required": true,
      "showInList": true
    },
    {
      "name": "paidTo",
      "label": "Paid To",
      "type": "string",
      "placeholder": "Vendor, Staff, or Service Provider",
      "required": true,
      "showInList": true
    },
    {
      "name": "departmentId",
      "label": "Department",
      "type": "relation",
      "relationEntity": "departments",
      "relationField": "name",
      "showInList": true
    },
    {
      "name": "invoiceNumber",
      "label": "Invoice / Bill No.",
      "type": "string",
      "showInList": true
    },
    {
      "name": "description",
      "label": "Description / Notes",
      "type": "text",
      "placeholder": "Enter details about this expense",
      "showInList": false
    },
    {
      "name": "attachment",
      "label": "Attachment (Receipt / Bill)",
      "type": "file",
      "multiple": false,
      "showInList": false
    },
    {
      "name": "approvedBy",
      "label": "Approved By",
      "type": "relation",
      "relationEntity": "users",
      "relationField": "email",
      "showInList": true
    },
    {
      "name": "status",
      "label": "Status",
      "type": "enum",
      "options": ["PENDING", "APPROVED", "REJECTED"],
      "default": "PENDING",
      "widget": "badge",
      "showInList": true
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    {
      "entity": "departments",
      "type": "ManyToOne",
      "foreignKey": "departmentId"
    },
    {
      "entity": "users",
      "type": "ManyToOne",
      "foreignKey": "approvedBy"
    }
  ],

  "ui": {
    "listView": {
      "title": "Expense List",
      "columns": ["expenseDate", "category", "amount", "departmentId", "status"],
      "filters": ["category", "status", "departmentId"],
      "searchFields": ["paidTo", "invoiceNumber"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Add / Edit Expense",
      "layout": [
        ["expenseDate", "category"],
        ["amount", "paymentMethod"],
        ["paidTo", "departmentId"],
        ["invoiceNumber"],
        ["description"],
        ["attachment"]
      ],
      "actions": ["save", "cancel"]
    },
    "detailView": {
      "title": "Expense Details",
      "sections": [
        {
          "title": "General Info",
          "fields": ["expenseDate", "category", "amount", "paymentMethod", "paidTo"]
        },
        {
          "title": "Department & Approval",
          "fields": ["departmentId", "approvedBy", "status"]
        },
        {
          "title": "Documentation",
          "fields": ["invoiceNumber", "attachment", "description"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "approveExpense",
      "label": "Approve Expense",
      "type": "update",
      "endpoint": "/api/expenses/:id/status",
      "method": "PUT",
      "payload": { "status": "APPROVED" },
      "successMessage": "Expense approved successfully!"
    },
    {
      "id": "rejectExpense",
      "label": "Reject Expense",
      "type": "update",
      "endpoint": "/api/expenses/:id/status",
      "method": "PUT",
      "payload": { "status": "REJECTED" },
      "successMessage": "Expense rejected."
    }
  ],

  "reasoning": {
    "businessLogic": "Expenses help monitor hospital financial health. Each expense is verified, categorized, and linked to its responsible department and approver for audit tracking.",
    "uiLogic": "The interface provides filters by department and category with quick status badges for approvals. Attachments streamline digital bill submission and record-keeping."
  }
}
