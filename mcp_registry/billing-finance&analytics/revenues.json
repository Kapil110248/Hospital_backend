{
  "id": "revenues",
  "title": "Revenue Management",
  "description": "Tracks all revenue inflows generated from services such as consultations, pharmacy sales, lab tests, and insurance claims.",
  "route": "/billing/revenues",
  "icon": "TrendingUp",
  "entity": "Revenue",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Accountant"],
    "create": ["Admin", "Accountant"],
    "edit": ["Admin"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/revenues",
    "get": "/api/revenues/:id",
    "create": "/api/revenues",
    "update": "/api/revenues/:id",
    "delete": "/api/revenues/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Revenue ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "invoiceId",
      "label": "Invoice Reference",
      "type": "relation",
      "relationEntity": "invoices",
      "relationField": "invoiceNumber",
      "required": true,
      "showInList": true
    },
    {
      "name": "source",
      "label": "Revenue Source",
      "type": "enum",
      "options": ["CONSULTATION", "LAB", "PHARMACY", "ROOM", "SURGERY", "INSURANCE", "OTHER"],
      "widget": "select",
      "required": true,
      "showInList": true
    },
    {
      "name": "departmentId",
      "label": "Department",
      "type": "relation",
      "relationEntity": "departments",
      "relationField": "name",
      "showInList": true
    },
    {
      "name": "amount",
      "label": "Revenue Amount",
      "type": "currency",
      "required": true,
      "showInList": true
    },
    {
      "name": "paymentMode",
      "label": "Payment Mode",
      "type": "enum",
      "options": ["CASH", "CARD", "UPI", "BANK_TRANSFER", "INSURANCE"],
      "widget": "select",
      "showInList": true
    },
    {
      "name": "receivedDate",
      "label": "Received Date",
      "type": "datetime",
      "required": true,
      "showInList": true
    },
    {
      "name": "processedBy",
      "label": "Processed By",
      "type": "relation",
      "relationEntity": "users",
      "relationField": "email",
      "showInList": true
    },
    {
      "name": "status",
      "label": "Status",
      "type": "enum",
      "options": ["RECEIVED", "PENDING", "ADJUSTED"],
      "default": "RECEIVED",
      "widget": "badge",
      "showInList": true
    },
    {
      "name": "remarks",
      "label": "Remarks / Notes",
      "type": "text",
      "placeholder": "Add any comments or notes about the transaction",
      "showInList": false
    },
    {
      "name": "attachment",
      "label": "Proof of Payment / Record",
      "type": "file",
      "multiple": false,
      "showInList": false
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    {
      "entity": "invoices",
      "type": "ManyToOne",
      "foreignKey": "invoiceId"
    },
    {
      "entity": "departments",
      "type": "ManyToOne",
      "foreignKey": "departmentId"
    },
    {
      "entity": "users",
      "type": "ManyToOne",
      "foreignKey": "processedBy"
    }
  ],

  "ui": {
    "listView": {
      "title": "Revenue List",
      "columns": ["invoiceId", "source", "departmentId", "amount", "paymentMode", "status", "receivedDate"],
      "filters": ["source", "departmentId", "status"],
      "searchFields": ["invoiceId"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Record Revenue Entry",
      "layout": [
        ["invoiceId", "source"],
        ["departmentId", "amount"],
        ["paymentMode", "status"],
        ["receivedDate"],
        ["remarks"],
        ["attachment"]
      ],
      "actions": ["save", "cancel"]
    },
    "detailView": {
      "title": "Revenue Details",
      "sections": [
        {
          "title": "Transaction Info",
          "fields": ["invoiceId", "source", "departmentId", "amount", "paymentMode", "status"]
        },
        {
          "title": "Processing & Notes",
          "fields": ["processedBy", "receivedDate", "remarks", "attachment"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "markAdjusted",
      "label": "Mark as Adjusted",
      "type": "update",
      "endpoint": "/api/revenues/:id/status",
      "method": "PUT",
      "payload": { "status": "ADJUSTED" },
      "successMessage": "Revenue marked as adjusted successfully!"
    }
  ],

  "reasoning": {
    "businessLogic": "Revenue tracking consolidates all income streams into one unified record. It ensures accurate financial reports across departments and payment modes, helping identify high-performing services.",
    "uiLogic": "UI provides quick filtering by department, source, and payment mode. Color-coded badges help accountants monitor the revenue status in real time for dashboard analytics."
  }
}
