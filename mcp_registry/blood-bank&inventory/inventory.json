{
  "id": "inventory",
  "title": "General Inventory",
  "description": "Tracks all non-pharmaceutical items including equipment, consumables, and supplies. Handles stock levels, location tracking, purchase links, and usage logs.",
  "entity": "InventoryItem",
  "icon": "boxes",
  "version": "1.0.0",
  "module": "Inventory Management",

  "permissions": {
    "view": ["Admin", "StoreKeeper", "DepartmentHead"],
    "create": ["Admin", "StoreKeeper"],
    "edit": ["Admin", "StoreKeeper"],
    "delete": ["Admin"]
  },

  "api": {
    "base": "/api/inventory/items",
    "endpoints": {
      "list": { "method": "GET", "path": "/" },
      "get": { "method": "GET", "path": "/:id" },
      "create": { "method": "POST", "path": "/" },
      "update": { "method": "PUT", "path": "/:id" },
      "delete": { "method": "DELETE", "path": "/:id" },
      "lowStock": { "method": "GET", "path": "/alerts/low-stock" },
      "expiryAlert": { "method": "GET", "path": "/alerts/expiry" }
    }
  },

  "fields": [
    { "name": "id", "label": "Item ID", "type": "uuid", "primary": true, "autoGenerated": true },

    {
      "name": "itemCode",
      "label": "Item Code",
      "type": "string",
      "unique": true,
      "required": true,
      "placeholder": "Auto-generated unique code (e.g., INV-0001)",
      "showInList": true
    },
    {
      "name": "itemName",
      "label": "Item Name",
      "type": "string",
      "required": true,
      "placeholder": "Enter item name",
      "showInList": true
    },
    {
      "name": "category",
      "label": "Category",
      "type": "enum",
      "options": ["Equipment", "Consumable", "Stationery", "Furniture", "Maintenance"],
      "widget": "select",
      "required": true,
      "showInList": true
    },
    {
      "name": "unitOfMeasure",
      "label": "Unit of Measure",
      "type": "string",
      "placeholder": "e.g. Box, Piece, Packet, Liter",
      "showInList": true
    },
    {
      "name": "quantityAvailable",
      "label": "Available Quantity",
      "type": "number",
      "default": 0,
      "showInList": true
    },
    {
      "name": "reorderLevel",
      "label": "Reorder Level",
      "type": "number",
      "default": 10,
      "showInList": true
    },
    {
      "name": "unitCost",
      "label": "Unit Cost (₹)",
      "type": "number",
      "default": 0,
      "step": "0.01"
    },
    {
      "name": "totalValue",
      "label": "Stock Value (₹)",
      "type": "computed",
      "formula": "quantityAvailable * unitCost",
      "showInList": true
    },
    {
      "name": "supplierId",
      "label": "Supplier",
      "type": "relation",
      "relationEntity": "suppliers",
      "relationField": "name",
      "widget": "select",
      "showInList": true
    },
    {
      "name": "purchaseOrderId",
      "label": "Purchase Order",
      "type": "relation",
      "relationEntity": "purchaseorders",
      "relationField": "orderNumber",
      "widget": "select"
    },
    {
      "name": "location",
      "label": "Storage Location",
      "type": "string",
      "placeholder": "Store / Rack / Department"
    },
    {
      "name": "expiryDate",
      "label": "Expiry Date (if applicable)",
      "type": "date"
    },
    {
      "name": "status",
      "label": "Item Status",
      "type": "enum",
      "options": ["Available", "Low Stock", "Out of Stock", "Expired", "Damaged"],
      "default": "Available",
      "showInList": true
    },
    {
      "name": "lastUpdated",
      "label": "Last Updated",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "remarks",
      "label": "Remarks / Notes",
      "type": "text",
      "widget": "textarea"
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true
    },
    { "name": "updatedAt", "label": "Updated At", "type": "datetime", "readOnly": true }
  ],

  "relations": [
    { "entity": "suppliers", "type": "ManyToOne", "foreignKey": "supplierId" },
    { "entity": "purchaseorders", "type": "ManyToOne", "foreignKey": "purchaseOrderId" },
    { "entity": "departments", "type": "ManyToMany", "foreignKey": "departmentId" }
  ],

  "ui": {
    "listView": {
      "title": "Inventory Items Overview",
      "columns": ["itemCode", "itemName", "category", "quantityAvailable", "totalValue", "status"],
      "filters": ["category", "status"],
      "searchFields": ["itemCode", "itemName", "category"],
      "actions": ["view", "edit", "delete", "markLowStock"]
    },
    "formView": {
      "title": "Add / Edit Inventory Item",
      "layout": [
        ["itemCode", "itemName", "category", "unitOfMeasure"],
        ["quantityAvailable", "reorderLevel", "unitCost", "totalValue"],
        ["supplierId", "purchaseOrderId", "location"],
        ["expiryDate", "status"],
        ["remarks"]
      ],
      "actions": ["save", "reset", "cancel"]
    },
    "detailView": {
      "title": "Inventory Item Details",
      "sections": [
        {
          "title": "Item Information",
          "fields": ["itemCode", "itemName", "category", "unitOfMeasure", "status"]
        },
        {
          "title": "Stock & Procurement",
          "fields": ["quantityAvailable", "reorderLevel", "unitCost", "totalValue", "supplierId", "purchaseOrderId"]
        },
        {
          "title": "Location & Tracking",
          "fields": ["location", "expiryDate", "lastUpdated", "remarks"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "markLowStock",
      "label": "Mark as Low Stock",
      "type": "action",
      "method": "PATCH",
      "endpoint": "/api/inventory/items/:id/status",
      "body": { "status": "Low Stock" },
      "successMessage": "Item marked as Low Stock"
    },
    {
      "id": "markExpired",
      "label": "Mark as Expired",
      "type": "action",
      "method": "PATCH",
      "endpoint": "/api/inventory/items/:id/status",
      "body": { "status": "Expired" },
      "successMessage": "Item marked as expired"
    }
  ],

  "businessLogic": {
    "rules": [
      "If quantityAvailable < reorderLevel, status auto-updates to 'Low Stock'.",
      "Items with expiryDate before today are automatically flagged as 'Expired'.",
      "Total stock value = quantityAvailable * unitCost.",
      "Department requests decrement stock quantities upon approval.",
      "Stock adjustments recorded through separate audit logs for traceability."
    ]
  },

  "reasoning": {
    "businessLogic": "Ensures centralized visibility and control of hospital resources, allowing procurement planning and cost tracking.",
    "uiLogic": "Admins and storekeepers can quickly filter low or expired stock and maintain procurement links."
  }
}
