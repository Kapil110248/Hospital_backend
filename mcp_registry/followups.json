{
  "id": "followups",
  "title": "Follow-Ups",
  "description": "Registry for tracking follow-up visits or calls after initial consultations, allowing doctors and staff to monitor recovery, treatment progress, or post-discharge reviews.",
  "route": "/followups",
  "icon": "RefreshCcw",
  "entity": "FollowUp",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Doctor", "Nurse"],
    "create": ["Admin", "Doctor"],
    "edit": ["Admin", "Doctor"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/followups",
    "get": "/api/followups/:id",
    "create": "/api/followups",
    "update": "/api/followups/:id",
    "delete": "/api/followups/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Follow-Up ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true,
      "showInList": false
    },
    {
      "name": "followupCode",
      "label": "Follow-Up Code",
      "type": "string",
      "required": true,
      "unique": true,
      "placeholder": "FUP-001",
      "showInList": true,
      "sortable": true
    },
    {
      "name": "patientId",
      "label": "Patient",
      "type": "relation",
      "relationEntity": "patients",
      "relationField": "patientCode",
      "widget": "select",
      "required": true,
      "showInList": true,
      "filterable": true
    },
    {
      "name": "doctorId",
      "label": "Doctor",
      "type": "relation",
      "relationEntity": "doctors",
      "relationField": "doctorCode",
      "widget": "select",
      "required": true,
      "showInList": true,
      "filterable": true
    },
    {
      "name": "appointmentId",
      "label": "Linked Appointment",
      "type": "relation",
      "relationEntity": "appointments",
      "relationField": "appointmentCode",
      "widget": "select",
      "showInList": false
    },
    {
      "name": "followUpDate",
      "label": "Follow-Up Date",
      "type": "datetime",
      "required": true,
      "showInList": true,
      "sortable": true
    },
    {
      "name": "status",
      "label": "Status",
      "type": "enum",
      "options": ["PENDING", "COMPLETED", "MISSED"],
      "widget": "select",
      "default": "PENDING",
      "showInList": true,
      "filterable": true
    },
    {
      "name": "communicationMode",
      "label": "Communication Mode",
      "type": "enum",
      "options": ["IN_PERSON", "PHONE_CALL", "VIDEO_CALL", "MESSAGE"],
      "widget": "select",
      "showInList": true
    },
    {
      "name": "notes",
      "label": "Follow-Up Notes",
      "type": "string",
      "widget": "textarea",
      "placeholder": "Enter summary, feedback, or recommendations from this follow-up"
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    { "entity": "patients", "type": "ManyToOne", "foreignKey": "patientId" },
    { "entity": "doctors", "type": "ManyToOne", "foreignKey": "doctorId" },
    { "entity": "appointments", "type": "ManyToOne", "foreignKey": "appointmentId" }
  ],

  "ui": {
    "listView": {
      "title": "Follow-Up Tracker",
      "columns": ["followupCode", "patientId", "doctorId", "followUpDate", "status", "communicationMode"],
      "searchFields": ["followupCode", "patientId", "doctorId"],
      "filters": ["doctorId", "patientId", "status", "communicationMode"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Add / Edit Follow-Up",
      "layout": [
        ["followupCode", "patientId", "doctorId"],
        ["appointmentId", "followUpDate", "status"],
        ["communicationMode"],
        ["notes"]
      ],
      "actions": ["save", "reset", "cancel"]
    },
    "detailView": {
      "title": "Follow-Up Details",
      "sections": [
        {
          "title": "Follow-Up Information",
          "fields": ["followupCode", "followUpDate", "status", "communicationMode"]
        },
        {
          "title": "Linked Entities",
          "fields": ["patientId", "doctorId", "appointmentId"]
        },
        {
          "title": "Notes & History",
          "fields": ["notes", "createdAt", "updatedAt"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "addFollowup",
      "label": "Add Follow-Up",
      "type": "create",
      "endpoint": "/api/followups",
      "method": "POST",
      "successMessage": "Follow-Up added successfully"
    },
    {
      "id": "updateFollowup",
      "label": "Update Follow-Up",
      "type": "edit",
      "endpoint": "/api/followups/:id",
      "method": "PUT",
      "successMessage": "Follow-Up updated successfully"
    },
    {
      "id": "markCompleted",
      "label": "Mark as Completed",
      "type": "action",
      "endpoint": "/api/followups/:id/complete",
      "method": "POST",
      "confirmation": "Mark this follow-up as completed?",
      "successMessage": "Follow-Up marked as completed"
    },
    {
      "id": "markMissed",
      "label": "Mark as Missed",
      "type": "action",
      "endpoint": "/api/followups/:id/missed",
      "method": "POST",
      "confirmation": "Mark this follow-up as missed?",
      "successMessage": "Follow-Up marked as missed"
    }
  ],

  "reasoning": {
    "businessLogic": "Follow-ups help ensure continuity of care. They are linked with patients, doctors, and prior appointments to track ongoing health progress or treatment compliance.",
    "uiLogic": "Doctors and Admins can schedule and complete follow-ups. Status and mode fields enable tracking whether the patient was reviewed in person, over phone, or online."
  }
}
