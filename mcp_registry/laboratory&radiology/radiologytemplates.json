{
  "id": "radiologytemplates",
  "title": "Radiology Templates",
  "description": "Defines reusable templates for radiology imaging reports such as X-ray, CT, MRI, and Ultrasound, with standard report structure and impression sections.",
  "route": "/radiology/templates",
  "icon": "ScanLine",
  "entity": "RadiologyTemplate",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Radiologist", "Doctor"],
    "create": ["Admin", "Radiologist"],
    "edit": ["Admin", "Radiologist"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/radiologytemplates",
    "get": "/api/radiologytemplates/:id",
    "create": "/api/radiologytemplates",
    "update": "/api/radiologytemplates/:id",
    "delete": "/api/radiologytemplates/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Template ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "templateName",
      "label": "Template Name",
      "type": "string",
      "placeholder": "e.g., Chest X-Ray (PA View)",
      "required": true,
      "unique": true,
      "showInList": true
    },
    {
      "name": "modality",
      "label": "Imaging Modality",
      "type": "enum",
      "options": ["X-RAY", "CT", "MRI", "ULTRASOUND", "MAMMOGRAPHY", "PET", "OTHER"],
      "widget": "select",
      "required": true,
      "showInList": true
    },
    {
      "name": "bodyPart",
      "label": "Body Part / Region",
      "type": "string",
      "placeholder": "e.g., Chest, Abdomen, Brain",
      "showInList": true
    },
    {
      "name": "indication",
      "label": "Clinical Indication",
      "type": "text",
      "placeholder": "Why the scan was ordered (e.g., Chest pain, suspected fracture)",
      "showInList": false
    },
    {
      "name": "reportStructure",
      "label": "Report Sections",
      "type": "array",
      "items": {
        "type": "object",
        "fields": [
          { "name": "sectionTitle", "type": "string", "label": "Section Title", "required": true },
          { "name": "defaultContent", "type": "textarea", "label": "Default Content", "placeholder": "Enter prefilled text..." }
        ]
      },
      "widget": "table",
      "showInList": false
    },
    {
      "name": "impressionTemplate",
      "label": "Impression Template",
      "type": "textarea",
      "placeholder": "Summary or conclusion notes for this imaging type",
      "showInList": false
    },
    {
      "name": "recommendations",
      "label": "Recommendations",
      "type": "textarea",
      "placeholder": "Any follow-up or suggested imaging tests",
      "showInList": false
    },
    {
      "name": "estimatedTime",
      "label": "Estimated Completion Time (hrs)",
      "type": "number",
      "default": 1,
      "showInList": true
    },
    {
      "name": "standardCost",
      "label": "Standard Cost",
      "type": "currency",
      "required": true,
      "showInList": true
    },
    {
      "name": "active",
      "label": "Active",
      "type": "boolean",
      "default": true,
      "widget": "toggle",
      "showInList": true
    },
    {
      "name": "createdBy",
      "label": "Created By",
      "type": "relation",
      "relationEntity": "users",
      "relationField": "email",
      "showInList": true
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    {
      "entity": "users",
      "type": "ManyToOne",
      "foreignKey": "createdBy"
    }
  ],

  "ui": {
    "listView": {
      "title": "Radiology Template List",
      "columns": ["templateName", "modality", "bodyPart", "standardCost", "active", "createdAt"],
      "filters": ["modality", "bodyPart", "active"],
      "searchFields": ["templateName", "modality"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Add / Edit Radiology Template",
      "layout": [
        ["templateName", "modality"],
        ["bodyPart", "estimatedTime"],
        ["standardCost"],
        ["indication"],
        ["reportStructure"],
        ["impressionTemplate"],
        ["recommendations"],
        ["active"]
      ],
      "actions": ["save", "cancel"]
    },
    "detailView": {
      "title": "Radiology Template Details",
      "sections": [
        {
          "title": "Basic Information",
          "fields": ["templateName", "modality", "bodyPart", "standardCost", "estimatedTime"]
        },
        {
          "title": "Report Content",
          "fields": ["reportStructure", "impressionTemplate", "recommendations"]
        },
        {
          "title": "Metadata",
          "fields": ["createdBy", "createdAt", "updatedAt"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "duplicateTemplate",
      "label": "Duplicate Template",
      "type": "custom",
      "endpoint": "/api/radiologytemplates/:id/duplicate",
      "method": "POST",
      "successMessage": "Template duplicated successfully!"
    },
    {
      "id": "deactivateTemplate",
      "label": "Deactivate Template",
      "type": "update",
      "endpoint": "/api/radiologytemplates/:id/status",
      "method": "PUT",
      "payload": { "active": false },
      "successMessage": "Template deactivated."
    }
  ],

  "reasoning": {
    "businessLogic": "Radiology templates help radiologists standardize imaging report structures and terminology. This ensures consistent findings documentation and faster reporting.",
    "uiLogic": "Each template can be edited in a rich structured form with collapsible report sections. Doctors can quickly select a predefined template while generating patient imaging reports."
  }
}
