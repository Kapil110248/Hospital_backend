{
  "id": "medicalrecords",
  "name": "Medical Records",
  "icon": "file-medical",
  "description": "Comprehensive record of a patientâ€™s medical history, diagnoses, prescriptions, lab reports, imaging results, and discharge summaries.",
  "collection": "medical_records",
  "model": "MedicalRecord",
  "primaryKey": "id",
  "displayField": "recordType",
  "relations": {
    "patient": {
      "type": "belongsTo",
      "model": "Patient",
      "foreignKey": "patientId",
      "displayField": "fullName"
    },
    "doctor": {
      "type": "belongsTo",
      "model": "Doctor",
      "foreignKey": "doctorId",
      "displayField": "name"
    },
    "visit": {
      "type": "belongsTo",
      "model": "FollowUp",
      "foreignKey": "followUpId",
      "displayField": "visitDate"
    }
  },
  "fields": [
    {
      "name": "id",
      "type": "uuid",
      "label": "Record ID",
      "auto": true,
      "readonly": true,
      "visible": false
    },
    {
      "name": "patientId",
      "type": "relation",
      "relation": "patient",
      "label": "Patient",
      "required": true
    },
    {
      "name": "doctorId",
      "type": "relation",
      "relation": "doctor",
      "label": "Attending Doctor",
      "required": true
    },
    {
      "name": "followUpId",
      "type": "relation",
      "relation": "visit",
      "label": "Follow-up Visit",
      "required": false
    },
    {
      "name": "recordType",
      "type": "enum",
      "label": "Record Type",
      "options": [
        "Diagnosis Note",
        "Lab Report",
        "Imaging Report",
        "Prescription",
        "Discharge Summary"
      ],
      "required": true
    },
    {
      "name": "recordDate",
      "type": "date",
      "label": "Record Date",
      "default": "today",
      "required": true
    },
    {
      "name": "description",
      "type": "textarea",
      "label": "Summary / Notes",
      "placeholder": "Enter details or observations..."
    },
    {
      "name": "attachments",
      "type": "file",
      "label": "Attachments",
      "multiple": true,
      "allowedTypes": ["pdf", "jpg", "png", "docx"],
      "description": "Upload lab results, prescriptions, imaging reports, etc."
    },
    {
      "name": "status",
      "type": "enum",
      "label": "Status",
      "options": ["Active", "Archived"],
      "default": "Active"
    },
    {
      "name": "createdAt",
      "type": "datetime",
      "label": "Created At",
      "readonly": true
    },
    {
      "name": "updatedAt",
      "type": "datetime",
      "label": "Last Updated",
      "readonly": true
    }
  ],
  "ui": {
    "list": {
      "title": "Medical Records",
      "fields": [
        "recordDate",
        "recordType",
        "patientId",
        "doctorId",
        "status"
      ],
      "sort": {
        "field": "recordDate",
        "direction": "desc"
      },
      "filters": [
        {
          "field": "recordType",
          "type": "dropdown",
          "label": "Record Type"
        },
        {
          "field": "status",
          "type": "dropdown",
          "label": "Status"
        },
        {
          "field": "recordDate",
          "type": "dateRange",
          "label": "Record Date"
        }
      ],
      "search": {
        "placeholder": "Search by patient, doctor, or record type..."
      },
      "actions": [
        "add",
        "edit",
        "delete",
        "view",
        "download"
      ]
    },
    "form": {
      "layout": [
        {
          "section": "Record Information",
          "fields": [
            "recordType",
            "recordDate",
            "status"
          ]
        },
        {
          "section": "Associations",
          "fields": [
            "patientId",
            "doctorId",
            "followUpId"
          ]
        },
        {
          "section": "Details & Files",
          "fields": [
            "description",
            "attachments"
          ]
        }
      ],
      "actions": [
        {
          "label": "Save Record",
          "type": "submit",
          "style": "primary"
        },
        {
          "label": "Cancel",
          "type": "cancel",
          "style": "secondary"
        }
      ]
    },
    "view": {
      "tabs": [
        {
          "label": "Overview",
          "fields": [
            "recordType",
            "recordDate",
            "status",
            "description"
          ]
        },
        {
          "label": "Linked Data",
          "fields": [
            "patientId",
            "doctorId",
            "followUpId"
          ]
        },
        {
          "label": "Attachments",
          "fields": ["attachments"]
        }
      ]
    }
  },
  "actions": {
    "create": {
      "api": "/api/medicalrecords",
      "method": "POST",
      "successMessage": "Medical record successfully added."
    },
    "update": {
      "api": "/api/medicalrecords/{id}",
      "method": "PUT",
      "successMessage": "Medical record updated."
    },
    "delete": {
      "api": "/api/medicalrecords/{id}",
      "method": "DELETE",
      "successMessage": "Medical record deleted."
    },
    "download": {
      "api": "/api/medicalrecords/{id}/download",
      "method": "GET"
    }
  },
  "reasoning": {
    "purpose": "To maintain a structured repository of all patient-related medical documents and history for continuity of care and audit tracking.",
    "usage": "Accessible from patient profile or follow-up details; enables quick viewing or downloading of relevant reports or prescriptions.",
    "visibility": "Admins, doctors, and authorized staff."
  }
}
