{
  "id": "patients",
  "title": "Patients Registry",
  "description": "Centralized patient management module. Tracks patient demographics, contact details, assigned doctor, medical history, and active admission or appointment links.",
  "route": "/patients",
  "icon": "UserHeart",
  "entity": "Patient",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Doctor", "Nurse", "Receptionist"],
    "create": ["Admin", "Receptionist"],
    "edit": ["Admin", "Doctor"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/patients",
    "get": "/api/patients/:id",
    "create": "/api/patients",
    "update": "/api/patients/:id",
    "delete": "/api/patients/:id",
    "search": "/api/patients/search"
  },

  "fields": [
    { "name": "id", "label": "Patient ID", "type": "uuid", "autoGenerated": true, "primary": true },
    { "name": "patientCode", "label": "Patient Code", "type": "string", "unique": true, "placeholder": "PT-0001", "showInList": true },
    { "name": "firstName", "label": "First Name", "type": "string", "required": true, "showInList": true },
    { "name": "lastName", "label": "Last Name", "type": "string", "required": true, "showInList": true },
    { "name": "gender", "label": "Gender", "type": "enum", "options": ["MALE", "FEMALE", "OTHER"], "widget": "select", "required": true, "showInList": true },
    { "name": "dateOfBirth", "label": "Date of Birth", "type": "date", "required": true, "showInList": false },
    { "name": "age", "label": "Age", "type": "number", "computed": "calculateAge(dateOfBirth)", "showInList": true },
    { "name": "bloodGroup", "label": "Blood Group", "type": "enum", "options": ["A+","A-","B+","B-","AB+","AB-","O+","O-"], "widget": "select", "showInList": true },
    { "name": "contactNumber", "label": "Phone Number", "type": "string", "required": true, "showInList": true },
    { "name": "email", "label": "Email", "type": "email", "placeholder": "example@email.com", "showInList": false },
    { "name": "address", "label": "Address", "type": "textarea", "showInList": false },
    { "name": "city", "label": "City", "type": "string", "showInList": true },
    { "name": "state", "label": "State", "type": "string" },
    { "name": "postcode", "label": "Postcode", "type": "string" },
    { "name": "country", "label": "Country", "type": "string", "default": "India" },
    { "name": "assignedDoctorId", "label": "Assigned Doctor", "type": "relation", "relationEntity": "doctors", "relationField": "fullName", "showInList": true },
    { "name": "emergencyContactName", "label": "Emergency Contact Name", "type": "string" },
    { "name": "emergencyContactNumber", "label": "Emergency Contact Number", "type": "string" },
    { "name": "insuranceProvider", "label": "Insurance Provider", "type": "string" },
    { "name": "policyNumber", "label": "Insurance Policy Number", "type": "string" },
    { "name": "photoUrl", "label": "Profile Photo", "type": "image", "showInList": false },
    { "name": "status", "label": "Status", "type": "enum", "options": ["ACTIVE", "DISCHARGED", "INACTIVE"], "default": "ACTIVE", "widget": "badge", "showInList": true },
    { "name": "createdAt", "label": "Created At", "type": "datetime", "readOnly": true },
    { "name": "updatedAt", "label": "Updated At", "type": "datetime", "readOnly": true }
  ],

  "relations": [
    { "entity": "doctors", "type": "ManyToOne", "foreignKey": "assignedDoctorId" },
    { "entity": "appointments", "type": "OneToMany", "foreignKey": "patientId" },
    { "entity": "admissions", "type": "OneToMany", "foreignKey": "patientId" },
    { "entity": "vitals", "type": "OneToMany", "foreignKey": "patientId" },
    { "entity": "medicalrecords", "type": "OneToMany", "foreignKey": "patientId" }
  ],

  "ui": {
    "listView": {
      "title": "Patients Directory",
      "columns": ["patientCode", "firstName", "lastName", "gender", "age", "bloodGroup", "assignedDoctorId", "status"],
      "filters": ["gender", "bloodGroup", "status", "assignedDoctorId"],
      "searchFields": ["firstName", "lastName", "patientCode", "contactNumber"],
      "actions": ["view", "edit", "delete"]
    },

    "formView": {
      "title": "Add / Edit Patient",
      "layout": [
        ["patientCode"],
        ["firstName", "lastName"],
        ["gender", "dateOfBirth", "bloodGroup"],
        ["contactNumber", "email"],
        ["address"],
        ["city", "state", "postcode", "country"],
        ["assignedDoctorId"],
        ["emergencyContactName", "emergencyContactNumber"],
        ["insuranceProvider", "policyNumber"],
        ["status"]
      ],
      "actions": [
        {
          "id": "savePatient",
          "label": "Save Patient",
          "type": "submit",
          "endpoint": "/api/patients",
          "method": "POST",
          "successMessage": "Patient saved successfully!"
        },
        { "id": "cancel", "label": "Cancel", "type": "cancel" }
      ]
    },

    "detailView": {
      "title": "Patient Details",
      "sections": [
        {
          "title": "Basic Info",
          "fields": ["patientCode", "firstName", "lastName", "gender", "age", "bloodGroup", "status"]
        },
        {
          "title": "Contact Info",
          "fields": ["contactNumber", "email", "address", "city", "state", "postcode", "country"]
        },
        {
          "title": "Doctor & Insurance",
          "fields": ["assignedDoctorId", "insuranceProvider", "policyNumber"]
        },
        {
          "title": "Emergency Contact",
          "fields": ["emergencyContactName", "emergencyContactNumber"]
        },
        {
          "title": "Timestamps",
          "fields": ["createdAt", "updatedAt"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "createAppointment",
      "label": "Create Appointment",
      "type": "link",
      "to": "/appointments/new?patientId={{id}}"
    },
    {
      "id": "viewMedicalRecords",
      "label": "View Medical Records",
      "type": "link",
      "to": "/patients/{{id}}/medicalrecords"
    },
    {
      "id": "viewVitals",
      "label": "View Vitals",
      "type": "link",
      "to": "/patients/{{id}}/vitals"
    }
  ],

  "reasoning": {
    "businessLogic": "Patient module connects demographic details, assigned doctors, and medical information. It’s central to all hospital workflows — appointments, billing, admissions, and pharmacy rely on patient data.",
    "uiLogic": "The patient UI supports quick lookup via patient code or name, showing blood group, age, and doctor in the list view. Tabs and actions link directly to related modules like vitals, appointments, and records."
  }
}
