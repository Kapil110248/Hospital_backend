{
  "id": "vitals",
  "title": "Patient Vitals",
  "description": "Tracks real-time patient vital signs recorded by nurses or doctors during OPD/IPD care. Links to patient and doctor records.",
  "route": "/patients/vitals",
  "icon": "Activity",
  "entity": "Vital",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Doctor", "Nurse"],
    "create": ["Doctor", "Nurse"],
    "edit": ["Doctor", "Nurse"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/vitals",
    "get": "/api/vitals/:id",
    "create": "/api/vitals",
    "update": "/api/vitals/:id",
    "delete": "/api/vitals/:id",
    "byPatient": "/api/vitals/patient/:patientId"
  },

  "fields": [
    { "name": "id", "label": "Vital ID", "type": "uuid", "autoGenerated": true, "primary": true },
    { "name": "patientId", "label": "Patient", "type": "relation", "relationEntity": "patients", "relationField": "fullName", "required": true, "showInList": true },
    { "name": "recordedById", "label": "Recorded By", "type": "relation", "relationEntity": "doctors", "relationField": "fullName", "required": true, "showInList": true },
    { "name": "temperature", "label": "Temperature (°C)", "type": "number", "min": 30, "max": 45, "required": true, "showInList": true },
    { "name": "pulse", "label": "Pulse (bpm)", "type": "number", "required": true, "showInList": true },
    { "name": "bloodPressureSystolic", "label": "BP Systolic (mmHg)", "type": "number", "required": true, "showInList": false },
    { "name": "bloodPressureDiastolic", "label": "BP Diastolic (mmHg)", "type": "number", "required": true, "showInList": false },
    { "name": "respiratoryRate", "label": "Respiratory Rate (breaths/min)", "type": "number", "showInList": false },
    { "name": "spo2", "label": "SpO₂ (%)", "type": "number", "min": 50, "max": 100, "showInList": true },
    { "name": "weight", "label": "Weight (kg)", "type": "number", "showInList": true },
    { "name": "height", "label": "Height (cm)", "type": "number", "showInList": false },
    { "name": "bmi", "label": "BMI", "type": "number", "computed": "(weight / ((height/100)*(height/100))).toFixed(1)", "showInList": true },
    { "name": "remarks", "label": "Remarks", "type": "textarea", "placeholder": "Any additional notes" },
    { "name": "recordedAt", "label": "Recorded At", "type": "datetime", "default": "now()", "showInList": true },
    { "name": "createdAt", "label": "Created At", "type": "datetime", "readOnly": true },
    { "name": "updatedAt", "label": "Updated At", "type": "datetime", "readOnly": true }
  ],

  "relations": [
    { "entity": "patients", "type": "ManyToOne", "foreignKey": "patientId" },
    { "entity": "doctors", "type": "ManyToOne", "foreignKey": "recordedById" }
  ],

  "ui": {
    "listView": {
      "title": "Patient Vitals Log",
      "columns": ["patientId", "temperature", "pulse", "spo2", "bmi", "recordedAt"],
      "filters": ["patientId", "recordedById"],
      "searchFields": ["patientId"],
      "actions": ["view", "edit", "delete"]
    },

    "formView": {
      "title": "Record Vitals",
      "layout": [
        ["patientId", "recordedById"],
        ["temperature", "pulse", "spo2"],
        ["bloodPressureSystolic", "bloodPressureDiastolic", "respiratoryRate"],
        ["weight", "height", "bmi"],
        ["remarks"]
      ],
      "actions": [
        {
          "id": "saveVitals",
          "label": "Save Vitals",
          "type": "submit",
          "endpoint": "/api/vitals",
          "method": "POST",
          "successMessage": "Vitals recorded successfully!"
        },
        { "id": "cancel", "label": "Cancel", "type": "cancel" }
      ]
    },

    "detailView": {
      "title": "Vitals Detail View",
      "sections": [
        {
          "title": "Basic Info",
          "fields": ["patientId", "recordedById", "recordedAt"]
        },
        {
          "title": "Measurements",
          "fields": ["temperature", "pulse", "bloodPressureSystolic", "bloodPressureDiastolic", "respiratoryRate", "spo2", "bmi"]
        },
        {
          "title": "Additional",
          "fields": ["remarks"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "viewPatient",
      "label": "View Patient",
      "type": "link",
      "to": "/patients/{{patientId}}"
    },
    {
      "id": "chartVitals",
      "label": "View Vital Chart",
      "type": "link",
      "to": "/patients/{{patientId}}/vitals/chart"
    }
  ],

  "reasoning": {
    "businessLogic": "Vitals serve as an essential health indicator. These readings are logged regularly by nurses/doctors to monitor a patient's condition, identify trends, and alert on abnormalities.",
    "uiLogic": "Vitals are linked with each patient’s profile. List view shows core vitals at a glance, while detailed view offers full insight with date and recorder information. BMI is automatically computed from height and weight."
  }
}
