{
  "id": "suppliers",
  "title": "Suppliers",
  "description": "Registry for all pharmaceutical and medical suppliers, including contact information, product categories, credit terms, and linked purchase orders.",
  "entity": "Supplier",
  "icon": "truck",
  "version": "1.0.0",
  "module": "Pharmacy Management",

  "permissions": {
    "view": ["Admin", "Pharmacist", "Accountant"],
    "create": ["Admin", "Pharmacist"],
    "edit": ["Admin"],
    "delete": ["Admin"]
  },

  "api": {
    "base": "/api/pharmacy/suppliers",
    "endpoints": {
      "list": { "method": "GET", "path": "/" },
      "get": { "method": "GET", "path": "/:id" },
      "create": { "method": "POST", "path": "/" },
      "update": { "method": "PUT", "path": "/:id" },
      "delete": { "method": "DELETE", "path": "/:id" },
      "summary": { "method": "GET", "path": "/summary" }
    }
  },

  "fields": [
    {
      "name": "id",
      "label": "Supplier ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "name",
      "label": "Supplier Name",
      "type": "string",
      "required": true,
      "placeholder": "Enter supplier name",
      "showInList": true,
      "sortable": true
    },
    {
      "name": "contactPerson",
      "label": "Contact Person",
      "type": "string",
      "placeholder": "Supplier contact name",
      "showInList": true
    },
    {
      "name": "contactNumber",
      "label": "Phone Number",
      "type": "string",
      "placeholder": "+91 9876543210",
      "validation": {
        "pattern": "^[0-9]{10,15}$"
      },
      "showInList": true
    },
    {
      "name": "email",
      "label": "Email Address",
      "type": "email",
      "placeholder": "supplier@example.com",
      "showInList": true
    },
    {
      "name": "address",
      "label": "Address",
      "type": "text",
      "widget": "textarea",
      "rows": 2
    },
    {
      "name": "gstNumber",
      "label": "GST / Tax Number",
      "type": "string",
      "placeholder": "GSTIN / TIN"
    },
    {
      "name": "licenseNumber",
      "label": "Drug License Number",
      "type": "string",
      "placeholder": "Enter valid drug license number"
    },
    {
      "name": "supplierType",
      "label": "Supplier Type",
      "type": "enum",
      "options": ["Pharmaceutical", "Medical Equipment", "Consumables", "General"],
      "default": "Pharmaceutical",
      "widget": "select",
      "showInList": true
    },
    {
      "name": "paymentTerms",
      "label": "Payment Terms",
      "type": "enum",
      "options": ["Cash on Delivery", "Net 15", "Net 30", "Net 45", "Advance"],
      "default": "Net 30",
      "widget": "select"
    },
    {
      "name": "creditLimit",
      "label": "Credit Limit (â‚¹)",
      "type": "number",
      "default": 0,
      "step": "0.01"
    },
    {
      "name": "isPreferredSupplier",
      "label": "Preferred Supplier",
      "type": "boolean",
      "widget": "toggle",
      "default": false,
      "showInList": true
    },
    {
      "name": "rating",
      "label": "Performance Rating",
      "type": "number",
      "min": 0,
      "max": 5,
      "step": "0.5",
      "default": 3,
      "widget": "stars"
    },
    {
      "name": "remarks",
      "label": "Remarks / Notes",
      "type": "text",
      "widget": "textarea"
    },
    {
      "name": "status",
      "label": "Status",
      "type": "enum",
      "options": ["Active", "Inactive", "Blacklisted"],
      "default": "Active",
      "showInList": true
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": false
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    {
      "entity": "purchaseorders",
      "type": "OneToMany",
      "foreignKey": "supplierId"
    },
    {
      "entity": "pharmacystock",
      "type": "OneToMany",
      "foreignKey": "supplierId"
    }
  ],

  "ui": {
    "listView": {
      "title": "Supplier Directory",
      "columns": ["name", "contactPerson", "contactNumber", "supplierType", "status", "isPreferredSupplier"],
      "searchFields": ["name", "contactPerson", "contactNumber", "email"],
      "filters": ["supplierType", "status", "isPreferredSupplier"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Add / Edit Supplier",
      "layout": [
        ["name", "supplierType"],
        ["contactPerson", "contactNumber"],
        ["email", "address"],
        ["gstNumber", "licenseNumber"],
        ["paymentTerms", "creditLimit"],
        ["isPreferredSupplier", "rating"],
        ["remarks", "status"]
      ],
      "actions": ["save", "reset", "cancel"]
    },
    "detailView": {
      "title": "Supplier Details",
      "sections": [
        {
          "title": "Business Information",
          "fields": ["name", "supplierType", "gstNumber", "licenseNumber"]
        },
        {
          "title": "Contact Details",
          "fields": ["contactPerson", "contactNumber", "email", "address"]
        },
        {
          "title": "Finance & Status",
          "fields": ["paymentTerms", "creditLimit", "isPreferredSupplier", "rating", "status"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "markPreferred",
      "label": "Mark as Preferred",
      "type": "action",
      "method": "PATCH",
      "endpoint": "/api/pharmacy/suppliers/:id/preferred",
      "body": { "isPreferredSupplier": true },
      "successMessage": "Supplier marked as preferred successfully"
    },
    {
      "id": "blacklistSupplier",
      "label": "Blacklist Supplier",
      "type": "action",
      "method": "PATCH",
      "endpoint": "/api/pharmacy/suppliers/:id/status",
      "body": { "status": "Blacklisted" },
      "confirmation": "Are you sure you want to blacklist this supplier?",
      "successMessage": "Supplier status updated to Blacklisted"
    }
  ],

  "businessLogic": {
    "rules": [
      "Preferred suppliers appear first in purchase order selection lists.",
      "Suppliers with status 'Blacklisted' cannot be selected in new purchase orders.",
      "Performance rating adjusts automatically based on on-time delivery ratio (future feature).",
      "Credit limit used across multiple open invoices must not exceed threshold."
    ]
  },

  "reasoning": {
    "businessLogic": "Suppliers are critical for stock control, audit, and compliance. This registry ensures every medicine batch and purchase order links to a verified vendor.",
    "uiLogic": "Admins maintain supplier master data; pharmacists select from verified suppliers during procurement."
  }
}
