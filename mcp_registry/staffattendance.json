{
  "id": "staffattendance",
  "title": "Staff Attendance",
  "description": "Tracks attendance of all hospital staff including doctors, nurses, receptionists, and support workers using QR and manual check-in modes.",
  "route": "/staffattendance",
  "icon": "ClockCheck",
  "entity": "StaffAttendance",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "HR", "Supervisor"],
    "create": ["Admin", "HR"],
    "edit": ["Admin", "HR"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/staffattendance",
    "get": "/api/staffattendance/:id",
    "create": "/api/staffattendance",
    "update": "/api/staffattendance/:id",
    "delete": "/api/staffattendance/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Attendance ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true,
      "showInList": false
    },
    {
      "name": "staffId",
      "label": "Staff Member",
      "type": "relation",
      "relationEntity": "staff",
      "relationField": "fullName",
      "required": true,
      "widget": "select",
      "showInList": true,
      "filterable": true
    },
    {
      "name": "role",
      "label": "Role",
      "type": "enum",
      "options": [
        "Doctor",
        "Nurse",
        "Receptionist",
        "Pharmacist",
        "Lab Technician",
        "Radiologist",
        "Cleaner",
        "Security"
      ],
      "widget": "select",
      "showInList": true,
      "filterable": true
    },
    {
      "name": "date",
      "label": "Date",
      "type": "date",
      "required": true,
      "showInList": true,
      "sortable": true
    },
    {
      "name": "checkInTime",
      "label": "Check-In Time",
      "type": "time",
      "required": false,
      "showInList": true
    },
    {
      "name": "checkOutTime",
      "label": "Check-Out Time",
      "type": "time",
      "showInList": true
    },
    {
      "name": "mode",
      "label": "Attendance Mode",
      "type": "enum",
      "options": ["QR", "Manual"],
      "widget": "badge",
      "showInList": true,
      "filterable": true
    },
    {
      "name": "shiftType",
      "label": "Shift Type",
      "type": "enum",
      "options": ["Morning", "Evening", "Night", "Flexible"],
      "widget": "select",
      "showInList": true
    },
    {
      "name": "status",
      "label": "Status",
      "type": "enum",
      "options": ["Present", "Absent", "Late", "On Leave"],
      "widget": "status",
      "colorMap": {
        "Present": "green",
        "Absent": "red",
        "Late": "orange",
        "On Leave": "blue"
      },
      "showInList": true,
      "filterable": true
    },
    {
      "name": "remarks",
      "label": "Remarks / Notes",
      "type": "text",
      "placeholder": "Enter any additional comments (e.g. arrived late due to emergency)",
      "showInList": false
    },
    {
      "name": "verifiedBy",
      "label": "Verified By",
      "type": "relation",
      "relationEntity": "users",
      "relationField": "fullName",
      "widget": "select",
      "showInList": true
    },
    {
      "name": "createdAt",
      "label": "Recorded On",
      "type": "datetime",
      "readOnly": true,
      "showInList": true,
      "sortable": true
    },
    {
      "name": "updatedAt",
      "label": "Last Updated",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    { "entity": "staff", "type": "ManyToOne", "foreignKey": "staffId" },
    { "entity": "users", "type": "ManyToOne", "foreignKey": "verifiedBy" }
  ],

  "ui": {
    "listView": {
      "title": "Staff Attendance Log",
      "columns": [
        "staffId",
        "role",
        "date",
        "checkInTime",
        "checkOutTime",
        "mode",
        "shiftType",
        "status"
      ],
      "filters": ["role", "date", "status", "mode"],
      "searchFields": ["staffId", "role"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Add / Edit Attendance Entry",
      "layout": [
        ["staffId", "role", "date"],
        ["checkInTime", "checkOutTime", "shiftType"],
        ["mode", "status"],
        ["remarks", "verifiedBy"]
      ],
      "actions": ["save", "reset", "cancel"]
    },
    "detailView": {
      "title": "Attendance Details",
      "sections": [
        {
          "title": "Staff Info",
          "fields": ["staffId", "role", "date"]
        },
        {
          "title": "Attendance Info",
          "fields": [
            "checkInTime",
            "checkOutTime",
            "shiftType",
            "mode",
            "status"
          ]
        },
        {
          "title": "Verification & Remarks",
          "fields": ["verifiedBy", "remarks", "createdAt"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "markAttendance",
      "label": "Mark Attendance",
      "type": "create",
      "endpoint": "/api/staffattendance",
      "method": "POST",
      "successMessage": "Attendance marked successfully"
    },
    {
      "id": "updateAttendance",
      "label": "Update Record",
      "type": "edit",
      "endpoint": "/api/staffattendance/:id",
      "method": "PUT",
      "successMessage": "Attendance record updated"
    },
    {
      "id": "bulkUpload",
      "label": "Import Attendance (CSV)",
      "type": "upload",
      "endpoint": "/api/staffattendance/import",
      "method": "POST",
      "successMessage": "Bulk attendance data imported successfully"
    }
    
  ],


  "reasoning": {
    "businessLogic": "Tracks attendance of all staff for payroll and compliance. Integrates with duty roster and salary modules. Supports both QR and manual modes.",
    "uiLogic": "Admins and HR can view and filter attendance by role, date, or status. Automatic status updates based on QR check-ins ensure data accuracy."
  }
}
