{
  "id": "notifications",
  "title": "Notification Center",
  "description": "Manage notification templates, triggers, and delivery channels across the hospital system.",
  "route": "/settings/notifications",
  "icon": "Bell",
  "entity": "NotificationTemplate",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Receptionist"],
    "create": ["Admin"],
    "edit": ["Admin"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/notifications/templates",
    "get": "/api/notifications/templates/:id",
    "create": "/api/notifications/templates",
    "update": "/api/notifications/templates/:id",
    "delete": "/api/notifications/templates/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Template ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true
    },
    {
      "name": "title",
      "label": "Template Title",
      "type": "string",
      "placeholder": "e.g. Appointment Confirmation",
      "required": true,
      "showInList": true
    },
    {
      "name": "type",
      "label": "Notification Type",
      "type": "enum",
      "options": ["EMAIL", "SMS", "PUSH"],
      "widget": "select",
      "required": true,
      "showInList": true
    },
    {
      "name": "triggerEvent",
      "label": "Trigger Event",
      "type": "enum",
      "options": [
        "USER_REGISTERED",
        "PASSWORD_RESET",
        "APPOINTMENT_BOOKED",
        "APPOINTMENT_CANCELLED",
        "BILL_GENERATED",
        "MEDICINE_LOW_STOCK",
        "TASK_ASSIGNED",
        "PAYMENT_RECEIVED"
      ],
      "widget": "select",
      "showInList": true,
      "filterable": true
    },
    {
      "name": "subject",
      "label": "Email Subject / SMS Title",
      "type": "string",
      "placeholder": "Enter subject or title",
      "showInList": false
    },
    {
      "name": "messageBody",
      "label": "Message Body",
      "type": "richtext",
      "placeholder": "Write the notification message (HTML supported)",
      "required": true,
      "showInList": false
    },
    {
      "name": "placeholders",
      "label": "Dynamic Fields",
      "type": "array",
      "placeholder": ["{{userName}}", "{{appointmentDate}}", "{{invoiceId}}"],
      "showInList": false
    },
    {
      "name": "isActive",
      "label": "Active",
      "type": "boolean",
      "default": true,
      "widget": "toggle",
      "showInList": true
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "updatedAt",
      "label": "Last Updated",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    {
      "entity": "users",
      "type": "ManyToOne",
      "foreignKey": "createdBy"
    }
  ],

  "ui": {
    "listView": {
      "title": "Notification Templates",
      "columns": ["title", "type", "triggerEvent", "isActive", "createdAt"],
      "filters": ["type", "triggerEvent", "isActive"],
      "searchFields": ["title", "triggerEvent"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Add / Edit Notification Template",
      "layout": [
        ["title", "type"],
        ["triggerEvent"],
        ["subject"],
        ["messageBody"],
        ["placeholders"],
        ["isActive"]
      ],
      "actions": [
        {
          "id": "saveTemplate",
          "label": "Save Template",
          "type": "submit",
          "endpoint": "/api/notifications/templates",
          "method": "POST",
          "successMessage": "Notification template saved successfully!"
        },
        { "id": "cancel", "label": "Cancel", "type": "cancel" }
      ]
    },
    "detailView": {
      "title": "Notification Template Details",
      "sections": [
        {
          "title": "Template Info",
          "fields": ["title", "type", "triggerEvent", "isActive"]
        },
        {
          "title": "Message Body",
          "fields": ["subject", "messageBody"]
        },
        {
          "title": "Meta",
          "fields": ["createdAt", "updatedAt"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "testNotification",
      "label": "Send Test Notification",
      "type": "action",
      "endpoint": "/api/notifications/test",
      "method": "POST",
      "confirmation": "Send a test notification using this template?",
      "successMessage": "Test notification sent successfully!"
    },
    {
      "id": "toggleStatus",
      "label": "Activate / Deactivate",
      "type": "toggle",
      "endpoint": "/api/notifications/templates/:id/toggle",
      "method": "PATCH",
      "successMessage": "Notification status updated successfully!"
    }
  ],

  "reasoning": {
    "businessLogic": "Notifications are a key part of hospital automation â€” they alert users and staff about events like bookings, discharges, and payments. Admins can define custom message templates and choose the delivery method (email/SMS/push).",
    "uiLogic": "The notification module offers template management, dynamic field placeholders, and testing. It integrates with backend event hooks, ensuring all triggered modules (appointments, billing, pharmacy) send consistent messages."
  }
}
