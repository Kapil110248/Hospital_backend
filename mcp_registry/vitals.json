{
  "id": "vitals",
  "title": "Vitals",
  "description": "Registry for recording and tracking patient vital signs such as temperature, pulse, BP, SpO₂, and weight during visits.",
  "route": "/vitals",
  "icon": "Activity",
  "entity": "Vital",
  "version": "1.0.0",

  "permissions": {
    "view": ["Admin", "Doctor", "Nurse"],
    "create": ["Admin", "Nurse"],
    "edit": ["Admin", "Nurse"],
    "delete": ["Admin"]
  },

  "api": {
    "list": "/api/vitals",
    "get": "/api/vitals/:id",
    "create": "/api/vitals",
    "update": "/api/vitals/:id",
    "delete": "/api/vitals/:id"
  },

  "fields": [
    {
      "name": "id",
      "label": "Vital ID",
      "type": "uuid",
      "primary": true,
      "autoGenerated": true,
      "showInList": false
    },
    {
      "name": "recordDate",
      "label": "Record Date & Time",
      "type": "datetime",
      "default": "now",
      "required": true,
      "showInList": true,
      "sortable": true
    },
    {
      "name": "patientId",
      "label": "Patient",
      "type": "relation",
      "relationEntity": "patients",
      "relationField": "patientCode",
      "widget": "select",
      "required": true,
      "showInList": true,
      "filterable": true
    },
    {
      "name": "doctorId",
      "label": "Recorded By (Doctor)",
      "type": "relation",
      "relationEntity": "doctors",
      "relationField": "doctorCode",
      "widget": "select",
      "showInList": true
    },
    {
      "name": "temperature",
      "label": "Temperature (°C)",
      "type": "number",
      "min": 30,
      "max": 45,
      "required": true,
      "showInList": true
    },
    {
      "name": "pulseRate",
      "label": "Pulse Rate (bpm)",
      "type": "number",
      "min": 40,
      "max": 200,
      "required": true,
      "showInList": true
    },
    {
      "name": "respiratoryRate",
      "label": "Respiratory Rate (breaths/min)",
      "type": "number",
      "min": 10,
      "max": 60
    },
    {
      "name": "bloodPressure",
      "label": "Blood Pressure (mmHg)",
      "type": "string",
      "placeholder": "120/80",
      "validation": { "pattern": "^[0-9]{2,3}/[0-9]{2,3}$" },
      "showInList": true
    },
    {
      "name": "spo2",
      "label": "SpO₂ (%)",
      "type": "number",
      "min": 50,
      "max": 100,
      "showInList": true
    },
    {
      "name": "height",
      "label": "Height (cm)",
      "type": "number",
      "min": 50,
      "max": 250
    },
    {
      "name": "weight",
      "label": "Weight (kg)",
      "type": "number",
      "min": 1,
      "max": 250,
      "showInList": true
    },
    {
      "name": "bmi",
      "label": "BMI",
      "type": "computed",
      "formula": "weight / ((height/100)*(height/100))",
      "readOnly": true,
      "showInList": true
    },
    {
      "name": "notes",
      "label": "Notes",
      "type": "string",
      "widget": "textarea",
      "placeholder": "Additional observations"
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "datetime",
      "readOnly": true,
      "showInList": true,
      "sortable": true
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "datetime",
      "readOnly": true
    }
  ],

  "relations": [
    { "entity": "patients", "type": "ManyToOne", "foreignKey": "patientId" },
    { "entity": "doctors", "type": "ManyToOne", "foreignKey": "doctorId" }
  ],

  "ui": {
    "listView": {
      "title": "Vitals Records",
      "columns": ["recordDate", "patientId", "temperature", "pulseRate", "bloodPressure", "spo2", "weight", "bmi"],
      "searchFields": ["patientId", "doctorId", "recordDate"],
      "filters": ["recordDate", "patientId"],
      "actions": ["view", "edit", "delete"]
    },
    "formView": {
      "title": "Add / Edit Vital Record",
      "layout": [
        ["recordDate", "patientId", "doctorId"],
        ["temperature", "pulseRate", "respiratoryRate"],
        ["bloodPressure", "spo2"],
        ["height", "weight", "bmi"],
        ["notes"]
      ],
      "actions": ["save", "reset", "cancel"]
    },
    "detailView": {
      "title": "Vital Record Details",
      "sections": [
        {
          "title": "Patient & Record Info",
          "fields": ["recordDate", "patientId", "doctorId"]
        },
        {
          "title": "Vital Signs",
          "fields": ["temperature", "pulseRate", "respiratoryRate", "bloodPressure", "spo2"]
        },
        {
          "title": "Physical Stats",
          "fields": ["height", "weight", "bmi"]
        },
        {
          "title": "Remarks",
          "fields": ["notes"]
        }
      ]
    }
  },

  "actions": [
    {
      "id": "addVital",
      "label": "Add Vital Record",
      "type": "create",
      "endpoint": "/api/vitals",
      "method": "POST",
      "successMessage": "Vital record added successfully"
    },
    {
      "id": "updateVital",
      "label": "Update Vital Record",
      "type": "edit",
      "endpoint": "/api/vitals/:id",
      "method": "PUT",
      "successMessage": "Vital record updated"
    },
    {
      "id": "deleteVital",
      "label": "Delete Vital Record",
      "type": "delete",
      "endpoint": "/api/vitals/:id",
      "method": "DELETE",
      "confirmation": "Are you sure you want to delete this vital record?",
      "successMessage": "Vital record deleted successfully"
    }
  ],

  "reasoning": {
    "businessLogic": "The Vitals registry records patient physiological metrics during check-ups or admissions. It is essential for diagnosis and monitoring health trends over time. Each record is tied to a patient and optionally a recording doctor.",
    "uiLogic": "Nurses record vitals via tablet-friendly UI. Doctors view vitals in the patient’s detail tab. Automatic BMI calculation enhances usability. Filters allow tracking by patient or date for clinical analysis."
  }
}
